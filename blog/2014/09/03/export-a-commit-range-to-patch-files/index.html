  <!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="author" content="Calum Halcrow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a blog page with a list of posts.">

    <title>Export a commit range to patch files - Calum Halcrow</title>

    
    <meta name="description" content="Export a commit range to patch files Sep 3rd, 2014 Today I found myself in a position where a Git repo I am contributing to was to going to have its &hellip;">
    

    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <link rel="canonical" href="http://calumhalcrow.com/blog/2014/09/03/export-a-commit-range-to-patch-files">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/atom.xml" rel="alternate" title="Calum Halcrow" type="application/atom+xml">
    <script src="/javascripts/modernizr-2.0.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
    <script src="/javascripts/octopress.js" type="text/javascript"></script>
  </head>

  
  <body>
    <div id="layout" class="pure-g">
      <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    <h1 class="brand-title"><a href="/">Calum Halcrow</a></h1>
    <h2 class="brand-tagline">Web developer based in KL, MY.</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item">
          <a class="pure-button" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="pure-button" href="/projects">Projects</a>
        </li>
        <li class="nav-item">
          <a class="pure-button" href="http://github.com/calumhalcrow" target="_new">Github</a>
        </li>
      </ul>
    </nav>
  </div>
</div>


      <div class="content pure-u-1 pure-u-md-3-4">
        <div>
          <div>
  <article role="article">
    
    <header class="post-header">
  
    <h2 class="post-title">Export a commit range to patch files</h2>
  
</header>

<p class="post-meta">
  <time datetime="2014-09-03T12:40:00+08:00">Sep 3<span>rd</span>, 2014</time>


</p>

<section class="post">
  <div class="post-description">

  
    <p>Today I found myself in a position where a Git repo I am contributing to was to going to have its history significantly altered. Sensitive information was to be completely removed from the repo, and when done the repo would basically be a single commit on the master branch, with all other branches deleted.</p>

<!-- more -->


<p>But there were several open pull requests against master that would not get merged before this work was carried out. I had to save the commits in these PRs offline until the repo had been adjusted, then reapply them and re-open the PRs.</p>

<p>Here’s one way that this can be done:</p>

<h2>Commit range to patch files:</h2>

<p>Ensuring you have your topic branch checked out and that it has some commits on it,</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git checkout topic-branch
</span><span class='line'><span class="nv">$ </span>git log --oneline origin/master..
</span><span class='line'>898ea0f Adds more padding to footer.
</span><span class='line'>c455b4f Makes header text blue.
</span></code></pre></td></tr></table></div></figure>


<p>you can make a patch out of each commit with the <a href="http://git-scm.com/docs/git-format-patch">git format-patch</a> command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git format-patch origin/master..
</span><span class='line'>0001-Makes-header-text-blue.patch
</span><span class='line'>0002-Adds-more-padding-to-footer.patch
</span></code></pre></td></tr></table></div></figure>


<p>For each commit, we now have a patch file that can be saved offline and reapplied later:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ls -l *.patch
</span><span class='line'>-rw-r--r--  1 calum  staff  680 Sep  3 08:55 0001-Makes-header-text-blue.patch
</span><span class='line'>-rw-r--r--  1 calum  staff  684 Sep  3 08:55 0002-Adds-more-padding-to-footer.patch
</span></code></pre></td></tr></table></div></figure>


<p>To reapply, move the patches to a directory outside of the repo (I moved mine to my home dir), checkout master and use the <a href="http://git-scm.com/docs/git-am">git am</a> command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mv *.patch ~
</span><span class='line'><span class="nv">$ </span>git checkout master
</span><span class='line'>Switched to branch ‘master<span class="err">&#39;</span>
</span><span class='line'><span class="nv">$ </span>git am ~/*.patch
</span><span class='line'>Applying: Makes header text blue.
</span><span class='line'>Applying: Adds more padding to footer.
</span></code></pre></td></tr></table></div></figure>


<p>Now the commits have be reapplied onto master. From here you can create a new branch, push it and re-open your pull requests.</p>

  

  </div>
</section>

    <footer>
      <p class="meta">
        
          <a class="basic-alignment left" href="/blog/2014/01/26/new-blogging-setup/" title="Previous Post: New Blogging Setup">&laquo; New Blogging Setup</a>
          
        
        
      </p>
    </footer>
  </article>
</div>

        </div>
      </div>
    </div>

    <div class="footer">
  <div class="pure-menu pure-menu-horizontal pure-menu-open">
    <ul>
      <li><a href="/about">About</a></li>
      <li><a href="/projects">Projects</a></li>
      <li><a href="http://github.com/calumhalcrow" target="_new">GitHub</a></li>
      <li><a href="http://twitter.com/calumhalcrow" target="_new">Twitter</a></li>
      <li><a href="http://linkedin.com/calumhalcrow" target="_new">LinkedIn</a></li>
      <li><a href="http://facebook.com/calumhalcrow" target="_new">Facebook</a></li>
    </ul>
  </div>
</div>

  </body>
</html>
